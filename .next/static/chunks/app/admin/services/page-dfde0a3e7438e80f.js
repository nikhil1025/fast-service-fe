(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{5635:function(e,r,s){Promise.resolve().then(s.bind(s,5455))},9397:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6595:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});let a=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5455:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return b}});var a=s(7437),t=s(2265),i=s(9397),l=s(3247),d=s(5868),c=s(8930),n=s(6595),o=s(1837),m=s(2489),u=s(5863),x=s(3229);function p(e){let{isOpen:r,onClose:s,onSuccess:l,service:d,mode:n}=e,[p,g]=(0,t.useState)({title:"",categoryId:"",description:"",image:"",price:"",duration:"",features:[""],isActive:!0,sortOrder:0}),[b,y]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),[v,j]=(0,t.useState)([]);(0,t.useEffect)(()=>{r&&(N(),"edit"===n&&d?g({title:d.title,categoryId:d.categoryId,description:d.description,image:d.image,price:d.price,duration:d.duration,features:d.features.length>0?d.features:[""],isActive:d.isActive,sortOrder:d.sortOrder}):g({title:"",categoryId:"",description:"",image:"",price:"",duration:"",features:[""],isActive:!0,sortOrder:0}),f(null))},[r,n,d]);let N=async()=>{try{let e=await o.h.getCategories();j(e)}catch(e){console.error("Failed to fetch categories:",e)}},w=e=>{g(r=>({...r,features:r.features.filter((r,s)=>s!==e)}))},C=(e,r)=>{g(s=>({...s,features:s.features.map((s,a)=>a===e?r:s)}))},S=async e=>{e.preventDefault(),y(!0),f(null);try{let e={...p,features:p.features.filter(e=>""!==e.trim())};"create"===n?await o.h.createService(e):d&&await o.h.updateService(d.id,e),l(),s()}catch(e){f(e instanceof Error?e.message:"Operation failed")}finally{y(!1)}};return r?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"create"===n?"Add New Service":"Edit Service"}),(0,a.jsx)("button",{onClick:s,disabled:b,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,a.jsx)(m.Z,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:S,className:"p-6 space-y-6",children:[h&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:h})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title *"}),(0,a.jsx)("input",{type:"text",value:p.title,onChange:e=>g(r=>({...r,title:e.target.value})),disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,a.jsxs)("select",{value:p.categoryId,onChange:e=>g(r=>({...r,categoryId:e.target.value})),disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),v.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,a.jsx)("textarea",{value:p.description,onChange:e=>g(r=>({...r,description:e.target.value})),disabled:b,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL *"}),(0,a.jsx)("input",{type:"url",value:p.image,onChange:e=>g(r=>({...r,image:e.target.value})),disabled:b,placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),(0,a.jsx)("input",{type:"text",value:p.price,onChange:e=>g(r=>({...r,price:e.target.value})),disabled:b,placeholder:"AED 299",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),(0,a.jsx)("input",{type:"text",value:p.duration,onChange:e=>g(r=>({...r,duration:e.target.value})),disabled:b,placeholder:"2-3 hours",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),(0,a.jsx)("input",{type:"number",value:p.sortOrder,onChange:e=>g(r=>({...r,sortOrder:parseInt(e.target.value)||0})),disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Features"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{g(e=>({...e,features:[...e.features,""]}))},disabled:b,className:"text-primary hover:text-primary/80 text-sm flex items-center gap-1",children:[(0,a.jsx)(i.Z,{size:16}),"Add Feature"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:p.features.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>C(r,e.target.value),disabled:b,placeholder:"Enter feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50"}),p.features.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>w(r),disabled:b,className:"text-red-600 hover:text-red-800 disabled:opacity-50",children:(0,a.jsx)(c.Z,{size:16})})]},r))})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:p.isActive,onChange:e=>g(r=>({...r,isActive:e.target.checked})),disabled:b,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:s,disabled:b,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 disabled:opacity-50 flex items-center gap-2",children:[b?(0,a.jsx)(u.Z,{size:16,className:"animate-spin"}):(0,a.jsx)(x.Z,{size:16}),b?"Saving...":"Save Service"]})]})]})]})}):null}var g=s(5907);function b(){let[e,r]=(0,t.useState)([]),[s,m]=(0,t.useState)(!0),[u,x]=(0,t.useState)(""),[b,y]=(0,t.useState)("all"),[h,f]=(0,t.useState)(!1),[v,j]=(0,t.useState)(!1),[N,w]=(0,t.useState)(null),[C,S]=(0,t.useState)("create");(0,t.useEffect)(()=>{k()},[]);let k=async()=>{try{m(!0);let e=await o.h.getServices();r(e)}catch(e){console.error("Failed to fetch services:",e)}finally{m(!1)}},A=e=>{w(e),S("edit"),f(!0)},Z=e=>{w(e),j(!0)},O=async()=>{if(N)try{await o.h.deleteService(N.id),await k()}catch(e){console.error("Failed to delete service:",e),alert("Failed to delete service")}},z=e.filter(e=>{var r;let s=e.title.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase()),a="all"===b||(null===(r=e.category)||void 0===r?void 0:r.slug)===b;return s&&a});return s?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded"})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:[...Array(6)].map((e,r)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded"})]},r))})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Services"}),(0,a.jsxs)("button",{onClick:()=>{w(null),S("create"),f(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:[(0,a.jsx)(i.Z,{size:20}),"Add Service"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search services...",value:u,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),(0,a.jsx)("option",{value:"cleaning",children:"Cleaning"}),(0,a.jsx)("option",{value:"moving",children:"Moving"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"salon-spa",children:"Salon & Spa"})]})]})}),(0,a.jsx)("div",{className:"p-6",children:z.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(e=>{var r;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:border-primary/20 transition-colors",children:[(0,a.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-32 object-cover"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>A(e),className:"text-gray-600 hover:text-primary",children:(0,a.jsx)(d.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>Z(e),className:"text-gray-600 hover:text-red-600",children:(0,a.jsx)(c.Z,{size:16})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.Z,{size:14,className:"text-yellow-400",fill:"currentColor"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.rating}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.reviewCount,")"]})]}),(0,a.jsx)("span",{className:"text-sm font-bold text-primary",children:e.price})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:null===(r=e.category)||void 0===r?void 0:r.name}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})]})]})]},e.id)})}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No services found"})})})]}),(0,a.jsx)(p,{isOpen:h,onClose:()=>f(!1),onSuccess:k,service:N,mode:C}),(0,a.jsx)(g.Z,{isOpen:v,onClose:()=>j(!1),onConfirm:O,title:"Delete Service",message:"Are you sure you want to delete this service?",itemName:null==N?void 0:N.title})]})}}},function(e){e.O(0,[8,971,117,744],function(){return e(e.s=5635)}),_N_E=e.O()}]);