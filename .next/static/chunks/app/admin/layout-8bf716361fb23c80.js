(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{8683:function(e,t,r){Promise.resolve().then(r.bind(r,4945))},4766:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2451:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},91:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4794:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6595:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4945:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var s=r(7437),a=r(2265),n=r(9376),i=r(4603),c=r(7648),o=r(9763);let u=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=r(5805);let h=(0,o.Z)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);var d=r(4794),y=r(1047),m=r(6595),g=r(3417),f=r(3247),x=r(91);let p=(0,o.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=r(8906),k=r(407),b=r(2451);let j=[{name:"Dashboard",href:"/admin",icon:u},{name:"Users",href:"/admin/users",icon:l.Z},{name:"Categories",href:"/admin/categories",icon:h},{name:"Services",href:"/admin/services",icon:d.Z},{name:"Bookings",href:"/admin/bookings",icon:y.Z},{name:"Reviews",href:"/admin/reviews",icon:m.Z},{name:"Messages",href:"/admin/messages",icon:g.Z},{name:"Search",href:"/admin/search",icon:f.Z},{name:"Data Management",href:"/admin/data",icon:x.Z},{name:"Settings",href:"/admin/settings",icon:p}];function w(){let[e,t]=(0,a.useState)(!1),r=(0,n.usePathname)();return(0,s.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ".concat(e?"w-16":"w-64"),children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!e&&(0,s.jsxs)(c.default,{href:"/admin",className:"flex items-center gap-2",children:[(0,s.jsx)(v.Z,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("span",{className:"text-xl font-bold text-primary",children:"Fast Services"})]}),e&&(0,s.jsx)(c.default,{href:"/admin",className:"flex items-center justify-center w-full",children:(0,s.jsx)(v.Z,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("button",{onClick:()=>t(!e),className:"p-1.5 rounded-md hover:bg-gray-100 transition-colors",children:e?(0,s.jsx)(k.Z,{size:20}):(0,s.jsx)(b.Z,{size:20})})]}),(0,s.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:j.map(t=>{let a=r===t.href;return(0,s.jsxs)(c.default,{href:t.href,className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(a?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"),title:e?t.name:void 0,children:[(0,s.jsx)(t.icon,{size:20}),!e&&(0,s.jsx)("span",{children:t.name})]},t.name)})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:"A"})}),!e&&(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Admin Panel"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:"Administrator"})]})]})})]})})}var S=r(4766),N=r(7692);function q(){var e;let{user:t,logout:r}=(0,i.a)(),[c,o]=(0,a.useState)(!1),u=(0,n.useRouter)(),l=()=>{r(),u.push("/admin/login")};return(0,s.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,s.jsx)("div",{className:"flex-1 max-w-md",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md",children:[(0,s.jsx)(S.Z,{size:20}),(0,s.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>o(!c),className:"flex items-center gap-2 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:null==t?void 0:null===(e=t.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:null==t?void 0:t.name})]}),c&&(0,s.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 border-b border-gray-200",children:null==t?void 0:t.email}),(0,s.jsxs)("button",{onClick:()=>{l(),o(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[(0,s.jsx)(N.Z,{size:16}),"Logout"]})]})})]})]})]})})}function Z(e){let{children:t}=e,{user:r,loading:c}=(0,i.a)(),o=(0,n.useRouter)(),u=(0,n.usePathname)(),[l,h]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{if("/admin/login"===u){h(!1);return}if(!c){if(!r||"admin"!==r.role){o.push("/admin/login");return}h(!1)}})()},[r,c,o,u]),c||l)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):"/admin/login"===u?(0,s.jsx)(s.Fragment,{children:t}):r&&"admin"===r.role?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(w,{}),(0,s.jsxs)("div",{className:"lg:pl-64",children:[(0,s.jsx)(q,{}),(0,s.jsx)("main",{className:"p-6",children:t})]})]}):null}},4603:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return o}});var s=r(7437),a=r(2265),n=r(1837);let i=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let e=n.I.getToken();if(e)try{n.h.setToken(e);let t=await n.h.getProfile();c(t)}catch(e){console.error("Failed to get user profile:",e),n.I.logout()}u(!1)})()},[]);let l=async(e,t)=>{try{let r=await n.I.login(e,t);c(r.user)}catch(e){throw e}},h=async e=>{try{let t=await n.I.register(e);c(t.user)}catch(e){throw e}};return(0,s.jsx)(i.Provider,{value:{user:r,loading:o,login:l,register:h,logout:()=>{n.I.logout(),c(null)},isAuthenticated:!!r},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1837:function(e,t,r){"use strict";r.d(t,{I:function(){return n},h:function(){return a}});class s{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}removeToken(){this.token=null,localStorage.removeItem("auth_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({message:"An error occurred"}))).message||"HTTP ".concat(a.status));return a.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async getProfile(){return this.request("/auth/profile",{method:"POST"})}async getUsers(){return this.request("/users")}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getCategories(){return this.request("/categories")}async getCategoriesHierarchy(){return this.request("/categories/hierarchy")}async getCategoryBySlug(e){return this.request("/categories/slug/".concat(e))}async createCategory(e){return this.request("/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/categories/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/categories/".concat(e),{method:"DELETE"})}async seedCategories(){return this.request("/categories/seed")}async getServices(e){return this.request("/services".concat(e?"?categoryId=".concat(e):""))}async getFeaturedServices(){return this.request("/services/featured")}async getPopularServices(){return this.request("/services/popular")}async getServicesByCategory(e){return this.request("/services/category/".concat(e))}async getService(e){return this.request("/services/".concat(e))}async createService(e){return this.request("/services",{method:"POST",body:JSON.stringify(e)})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async seedServices(){return this.request("/services/seed")}async createBooking(e){return this.request("/bookings",{method:"POST",body:JSON.stringify(e)})}async getBookings(){return this.request("/bookings")}async getAllBookings(){return this.request("/bookings?all=true")}async getBooking(e){return this.request("/bookings/".concat(e))}async updateBookingStatus(e,t){return this.request("/bookings/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})})}async deleteBooking(e){return this.request("/bookings/".concat(e),{method:"DELETE"})}async getReviews(e){return this.request("/reviews".concat(e?"?serviceId=".concat(e):""))}async deleteReview(e){return this.request("/reviews/".concat(e),{method:"DELETE"})}async createContact(e){return this.request("/contact",{method:"POST",body:JSON.stringify(e)})}async getContacts(){return this.request("/contact")}async markContactAsRead(e){return this.request("/contact/".concat(e,"/read"),{method:"PATCH"})}async deleteContact(e){return this.request("/contact/".concat(e),{method:"DELETE"})}async getDashboardStats(){return this.request("/dashboard/stats")}async getDashboardActivity(){return this.request("/dashboard/activity")}async search(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,s]=e;null!=s&&t.append(r,s.toString())}),this.request("/search?".concat(t.toString()))}async getSearchFilters(){return this.request("/search/filters")}async getSearchSuggestions(e){return this.request("/search/suggestions?q=".concat(encodeURIComponent(e)))}async getPopularSearches(){return this.request("/search/popular")}constructor(e){this.token=null,this.baseURL=e,this.token=localStorage.getItem("auth_token")}}let a=new s("http://localhost:3001/test/api"),n={login:async(e,t)=>{let r=await a.login({email:e,password:t});return a.setToken(r.access_token),r},register:async e=>{let t=await a.register(e);return a.setToken(t.access_token),t},logout:()=>{a.removeToken()},getToken:()=>localStorage.getItem("auth_token"),isAuthenticated:()=>!!n.getToken()}}},function(e){e.O(0,[451,971,117,744],function(){return e(e.s=8683)}),_N_E=e.O()}]);