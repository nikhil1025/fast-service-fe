(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{9740:function(e,s,r){Promise.resolve().then(r.bind(r,5081))},7806:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});let a=(0,r(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5081:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var a=r(7437),t=r(2265),i=r(7806),l=r(3247),d=r(5868),n=r(8930),c=r(1837),o=r(2489),m=r(5863),x=r(3229);function u(e){let{isOpen:s,onClose:r,onSuccess:i,user:l,mode:d}=e,[n,u]=(0,t.useState)({name:"",email:"",phone:"",password:"",role:"user",isActive:!0}),[p,h]=(0,t.useState)(!1),[y,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{s&&("edit"===d&&l?u({name:l.name,email:l.email,phone:l.phone,password:"",role:l.role,isActive:l.isActive}):u({name:"",email:"",phone:"",password:"",role:"user",isActive:!0}),g(null))},[s,d,l]);let b=async e=>{e.preventDefault(),h(!0),g(null);try{if("create"===d)await c.h.register(n);else if(l){let e={...n};e.password||delete e.password,await c.h.updateUser(l.id,e)}i(),r()}catch(e){g(e instanceof Error?e.message:"Operation failed")}finally{h(!1)}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"create"===d?"Add New User":"Edit User"}),(0,a.jsx)("button",{onClick:r,disabled:p,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,a.jsx)(o.Z,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:b,className:"p-6 space-y-6",children:[y&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:y})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,a.jsx)("input",{type:"text",value:n.name,onChange:e=>u(s=>({...s,name:e.target.value})),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,a.jsx)("input",{type:"email",value:n.email,onChange:e=>u(s=>({...s,email:e.target.value})),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",value:n.phone,onChange:e=>u(s=>({...s,phone:e.target.value})),disabled:p,placeholder:"+971 XX XXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,a.jsxs)("select",{value:n.role,onChange:e=>u(s=>({...s,role:e.target.value})),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:!0,children:[(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ","create"===d?"*":"(leave empty to keep current)"]}),(0,a.jsx)("input",{type:"password",value:n.password,onChange:e=>u(s=>({...s,password:e.target.value})),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50",required:"create"===d,minLength:6}),"create"===d&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 6 characters"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:e=>u(s=>({...s,isActive:e.target.checked})),disabled:p,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:r,disabled:p,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 disabled:opacity-50 flex items-center gap-2",children:[p?(0,a.jsx)(m.Z,{size:16,className:"animate-spin"}):(0,a.jsx)(x.Z,{size:16}),p?"Saving...":"Save User"]})]})]})]})}):null}var p=r(5907);function h(){let[e,s]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[m,x]=(0,t.useState)(""),[h,y]=(0,t.useState)("all"),[g,b]=(0,t.useState)(!1),[f,j]=(0,t.useState)(!1),[v,N]=(0,t.useState)(null),[w,k]=(0,t.useState)("create");(0,t.useEffect)(()=>{C()},[]);let C=async()=>{try{o(!0);let e=await c.h.getUsers();s(e)}catch(e){console.error("Failed to fetch users:",e)}finally{o(!1)}},A=e=>{N(e),k("edit"),b(!0)},S=e=>{N(e),j(!0)},U=async()=>{if(v)try{await c.h.deleteUser(v.id),await C()}catch(e){console.error("Failed to delete user:",e),alert("Failed to delete user")}},Z=e.filter(e=>{let s=e.name.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase()),r="all"===h||e.role===h;return s&&r});return r?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"})]})},s))})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),(0,a.jsxs)("button",{onClick:()=>{N(null),k("create"),b(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:[(0,a.jsx)(i.Z,{size:20}),"Add User"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"user",children:"Users"}),(0,a.jsx)("option",{value:"admin",children:"Admins"})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>A(e),className:"text-gray-600 hover:text-primary",children:(0,a.jsx)(d.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>S(e),className:"text-gray-600 hover:text-red-600",children:(0,a.jsx)(n.Z,{size:16})})]})})]},e.id))})]})}),0===Z.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No users found"})})]}),(0,a.jsx)(u,{isOpen:g,onClose:()=>b(!1),onSuccess:C,user:v,mode:w}),(0,a.jsx)(p.Z,{isOpen:f,onClose:()=>j(!1),onConfirm:U,title:"Delete User",message:"Are you sure you want to delete this user?",itemName:null==v?void 0:v.name})]})}}},function(e){e.O(0,[8,971,117,744],function(){return e(e.s=9740)}),_N_E=e.O()}]);