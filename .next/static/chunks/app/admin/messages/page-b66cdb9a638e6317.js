(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{5478:function(e,t,s){Promise.resolve().then(s.bind(s,8660))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:c="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:h,...g}=s;return(0,r.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:c,strokeWidth:d?24*Number(l)/Number(o):l,className:["lucide","lucide-".concat(n(e)),u].join(" "),...g},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8660:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),n=s(3247);let i=(0,s(9763).Z)("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);var c=s(9345),o=s(2208),l=s(8930),d=s(1837);function u(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)(!0),[h,g]=(0,a.useState)(""),[m,y]=(0,a.useState)("all"),[x,p]=(0,a.useState)(null),[v,j]=(0,a.useState)({});(0,a.useEffect)(()=>{b()},[]);let b=async()=>{try{u(!0);let e=await d.h.getContacts();t(e)}catch(e){console.error("Failed to fetch messages:",e)}finally{u(!1)}},f=async e=>{try{await d.h.markContactAsRead(e),t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){console.error("Failed to mark as read:",e)}},N=async e=>{if(confirm("Are you sure you want to delete this message?"))try{j(t=>({...t,[e]:!0})),await d.h.deleteContact(e),await b(),(null==x?void 0:x.id)===e&&p(null)}catch(e){console.error("Failed to delete message:",e),alert("Failed to delete message")}finally{j(t=>({...t,[e]:!1}))}},k=e.filter(e=>{let t=e.name.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase())||e.subject.toLowerCase().includes(h.toLowerCase()),s="all"===m||"unread"===m&&!e.isRead||"read"===m&&e.isRead;return t&&s});return s?(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"h-16 bg-gray-200 rounded"})},t))})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.filter(e=>!e.isRead).length," unread"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(n.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Search messages...",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("select",{value:m,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary",children:[(0,r.jsx)("option",{value:"all",children:"All Messages"}),(0,r.jsx)("option",{value:"unread",children:"Unread"}),(0,r.jsx)("option",{value:"read",children:"Read"})]})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:k.map(e=>(0,r.jsx)("div",{className:"p-6 hover:bg-gray-50 cursor-pointer ".concat(e.isRead?"":"bg-blue-50"),onClick:()=>{p(e),e.isRead||f(e.id)},children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"mt-1",children:e.isRead?(0,r.jsx)(i,{size:20,className:"text-gray-400"}):(0,r.jsx)(c.Z,{size:20,className:"text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h3",{className:"font-medium ".concat(e.isRead?"text-gray-700":"text-gray-900"),children:e.name}),!e.isRead&&(0,r.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.email}),(0,r.jsx)("p",{className:"text-sm ".concat(e.isRead?"text-gray-600":"font-medium text-gray-900"),children:e.subject}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.message})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e)},className:"text-gray-600 hover:text-primary",children:(0,r.jsx)(o.Z,{size:16})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),N(e.id)},disabled:v[e.id],className:"text-gray-600 hover:text-red-600 disabled:opacity-50",children:(0,r.jsx)(l.Z,{size:16})})]})]})]})},e.id))}),0===k.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No messages found"})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 sticky top-6",children:x?(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Message Details"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"From"}),(0,r.jsx)("p",{className:"text-gray-900",children:x.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:x.email}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:x.phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Subject"}),(0,r.jsx)("p",{className:"text-gray-900",children:x.subject})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),(0,r.jsx)("p",{className:"text-gray-900",children:new Date(x.createdAt).toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Message"}),(0,r.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:x.message})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,r.jsx)("button",{className:"w-full px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:"Reply"})})]})]}):(0,r.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Select a message to view details"})})})]})]})}},1837:function(e,t,s){"use strict";s.d(t,{I:function(){return n},h:function(){return a}});class r{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}removeToken(){this.token=null,localStorage.removeItem("auth_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r={"Content-Type":"application/json",...t.headers};this.token&&(r.Authorization="Bearer ".concat(this.token));let a=await fetch(s,{...t,headers:r});if(!a.ok)throw Error((await a.json().catch(()=>({message:"An error occurred"}))).message||"HTTP ".concat(a.status));return a.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async getProfile(){return this.request("/auth/profile",{method:"POST"})}async getUsers(){return this.request("/users")}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getCategories(){return this.request("/categories")}async getCategoriesHierarchy(){return this.request("/categories/hierarchy")}async getCategoryBySlug(e){return this.request("/categories/slug/".concat(e))}async createCategory(e){return this.request("/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/categories/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/categories/".concat(e),{method:"DELETE"})}async seedCategories(){return this.request("/categories/seed")}async getServices(e){return this.request("/services".concat(e?"?categoryId=".concat(e):""))}async getFeaturedServices(){return this.request("/services/featured")}async getPopularServices(){return this.request("/services/popular")}async getServicesByCategory(e){return this.request("/services/category/".concat(e))}async getService(e){return this.request("/services/".concat(e))}async createService(e){return this.request("/services",{method:"POST",body:JSON.stringify(e)})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async seedServices(){return this.request("/services/seed")}async createBooking(e){return this.request("/bookings",{method:"POST",body:JSON.stringify(e)})}async getBookings(){return this.request("/bookings")}async getAllBookings(){return this.request("/bookings?all=true")}async getBooking(e){return this.request("/bookings/".concat(e))}async updateBookingStatus(e,t){return this.request("/bookings/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})})}async deleteBooking(e){return this.request("/bookings/".concat(e),{method:"DELETE"})}async getReviews(e){return this.request("/reviews".concat(e?"?serviceId=".concat(e):""))}async deleteReview(e){return this.request("/reviews/".concat(e),{method:"DELETE"})}async createContact(e){return this.request("/contact",{method:"POST",body:JSON.stringify(e)})}async getContacts(){return this.request("/contact")}async markContactAsRead(e){return this.request("/contact/".concat(e,"/read"),{method:"PATCH"})}async deleteContact(e){return this.request("/contact/".concat(e),{method:"DELETE"})}async getDashboardStats(){return this.request("/dashboard/stats")}async getDashboardActivity(){return this.request("/dashboard/activity")}async search(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())}),this.request("/search?".concat(t.toString()))}async getSearchFilters(){return this.request("/search/filters")}async getSearchSuggestions(e){return this.request("/search/suggestions?q=".concat(encodeURIComponent(e)))}async getPopularSearches(){return this.request("/search/popular")}constructor(e){this.token=null,this.baseURL=e,this.token=localStorage.getItem("auth_token")}}let a=new r("http://localhost:3001/test/api"),n={login:async(e,t)=>{let s=await a.login({email:e,password:t});return a.setToken(s.access_token),s},register:async e=>{let t=await a.register(e);return a.setToken(t.access_token),t},logout:()=>{a.removeToken()},getToken:()=>localStorage.getItem("auth_token"),isAuthenticated:()=>!!n.getToken()}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5478)}),_N_E=e.O()}]);