"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{3992:function(e,t,s){var r=s(7437),a=s(2265),n=s(5302),o=s(2489),i=s(1047),c=s(1837);t.Z=e=>{let{isOpen:t,onClose:s,serviceName:d}=e,[l,u]=(0,a.useState)({name:"",mobile:"",address:"",date:"",message:""}),[m,h]=(0,a.useState)({}),[g,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1);if(!t)return null;let p=()=>{let e={};l.name.trim()?l.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",l.mobile.trim()?/^(?:\+971|00971|0)?(?:50|51|52|55|56|58|2|3|4|6|7|9)\d{7}$/.test(l.mobile.trim())||(e.mobile="Please enter a valid UAE mobile number"):e.mobile="Mobile number is required",l.address.trim()?l.address.trim().length<10&&(e.address="Please enter a complete address"):e.address="Address is required";let t=new Date(l.date),s=new Date;return s.setHours(0,0,0,0),l.date?t<s&&(e.date="Please select a future date"):e.date="Date is required",h(e),0===Object.keys(e).length},f=e=>{let{id:t,value:s}=e.target;u(e=>({...e,[t]:s})),m[t]&&h(e=>({...e,[t]:void 0}))},k=async e=>{if(e.preventDefault(),p()){y(!0);try{await c.h.createBooking({serviceName:d,name:l.name,mobile:l.mobile,address:l.address,date:l.date,message:l.message||void 0}),x(!0),setTimeout(()=>{u({name:"",mobile:"",address:"",date:"",message:""}),x(!1),s()},2e3)}catch(e){console.error("Booking failed:",e),alert("Failed to create booking. Please try again.")}finally{y(!1)}}},v=()=>{g||(s(),x(!1))};return b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:v}),(0,r.jsx)("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-lg shadow-xl z-50 p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Booking Confirmed!"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Your booking for ",d," has been successfully submitted. We'll contact you soon to confirm the details."]}),(0,r.jsx)("button",{onClick:v,className:"px-6 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:"Close"})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:v}),(0,r.jsxs)("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-lg shadow-xl z-50 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Book Now"}),(0,r.jsx)("button",{onClick:v,disabled:g,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:(0,r.jsx)(o.Z,{size:24})})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["Booking for: ",d]}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",value:l.name,onChange:f,disabled:g,className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50 ".concat(m.name?"border-red-500":"border-gray-300")}),m.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),(0,r.jsx)("input",{type:"tel",id:"mobile",value:l.mobile,onChange:f,disabled:g,placeholder:"+971 XX XXX XXXX",className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50 ".concat(m.mobile?"border-red-500":"border-gray-300")}),m.mobile&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.mobile})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,r.jsx)("textarea",{id:"address",value:l.address,onChange:f,disabled:g,rows:2,className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50 ".concat(m.address?"border-red-500":"border-gray-300")}),m.address&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.address})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Date"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"date",id:"date",value:l.date,onChange:f,disabled:g,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 pr-10 border rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary appearance-none disabled:opacity-50 ".concat(m.date?"border-red-500":"border-gray-300"),style:{colorScheme:"light"}}),(0,r.jsx)(i.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]}),m.date&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message (Optional)"}),(0,r.jsx)("textarea",{id:"message",value:l.message,onChange:f,disabled:g,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary disabled:opacity-50"})]}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-primary text-white py-2.5 rounded-md hover:bg-primary/90 transition duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Submitting...":"Submit Booking"})]})]})]})}},1837:function(e,t,s){s.d(t,{I:function(){return n},h:function(){return a}});class r{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}removeToken(){this.token=null,localStorage.removeItem("auth_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r={"Content-Type":"application/json",...t.headers};this.token&&(r.Authorization="Bearer ".concat(this.token));let a=await fetch(s,{...t,headers:r});if(!a.ok)throw Error((await a.json().catch(()=>({message:"An error occurred"}))).message||"HTTP ".concat(a.status));return a.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async getProfile(){return this.request("/auth/profile",{method:"POST"})}async getUsers(){return this.request("/users")}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getCategories(){return this.request("/categories")}async getCategoriesHierarchy(){return this.request("/categories/hierarchy")}async getCategoryBySlug(e){return this.request("/categories/slug/".concat(e))}async createCategory(e){return this.request("/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/categories/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/categories/".concat(e),{method:"DELETE"})}async seedCategories(){return this.request("/categories/seed")}async getServices(e){return this.request("/services".concat(e?"?categoryId=".concat(e):""))}async getFeaturedServices(){return this.request("/services/featured")}async getPopularServices(){return this.request("/services/popular")}async getServicesByCategory(e){return this.request("/services/category/".concat(e))}async getService(e){return this.request("/services/".concat(e))}async createService(e){return this.request("/services",{method:"POST",body:JSON.stringify(e)})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async seedServices(){return this.request("/services/seed")}async createBooking(e){return this.request("/bookings",{method:"POST",body:JSON.stringify(e)})}async getBookings(){return this.request("/bookings")}async getAllBookings(){return this.request("/bookings?all=true")}async getBooking(e){return this.request("/bookings/".concat(e))}async updateBookingStatus(e,t){return this.request("/bookings/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})})}async deleteBooking(e){return this.request("/bookings/".concat(e),{method:"DELETE"})}async getReviews(e){return this.request("/reviews".concat(e?"?serviceId=".concat(e):""))}async deleteReview(e){return this.request("/reviews/".concat(e),{method:"DELETE"})}async createContact(e){return this.request("/contact",{method:"POST",body:JSON.stringify(e)})}async getContacts(){return this.request("/contact")}async markContactAsRead(e){return this.request("/contact/".concat(e,"/read"),{method:"PATCH"})}async deleteContact(e){return this.request("/contact/".concat(e),{method:"DELETE"})}async getDashboardStats(){return this.request("/dashboard/stats")}async getDashboardActivity(){return this.request("/dashboard/activity")}async search(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())}),this.request("/search?".concat(t.toString()))}async getSearchFilters(){return this.request("/search/filters")}async getSearchSuggestions(e){return this.request("/search/suggestions?q=".concat(encodeURIComponent(e)))}async getPopularSearches(){return this.request("/search/popular")}constructor(e){this.token=null,this.baseURL=e,this.token=localStorage.getItem("auth_token")}}let a=new r("http://localhost:3001/test/api"),n={login:async(e,t)=>{let s=await a.login({email:e,password:t});return a.setToken(s.access_token),s},register:async e=>{let t=await a.register(e);return a.setToken(t.access_token),t},logout:()=>{a.removeToken()},getToken:()=>localStorage.getItem("auth_token"),isAuthenticated:()=>!!n.getToken()}}}]);